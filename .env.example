# Alto - Configuration des variables d'environnement
# Copiez ce fichier vers .env et remplissez les valeurs

# ==============================================================================
# FRONTEND (Vite - prefixe VITE_)
# ==============================================================================

# Gemini API Key (depuis Google AI Studio: https://aistudio.google.com/apikey)
VITE_GEMINI_API_KEY=your_gemini_api_key_here

# Google OAuth Client ID (depuis Google Cloud Console)
# 1. Allez sur https://console.cloud.google.com/
# 2. Creez un projet ou selectionnez-en un existant
# 3. APIs & Services > Credentials > Create Credentials > OAuth client ID
# 4. Type: Web application
# 5. Authorized JavaScript origins: http://localhost:5173
# 6. Authorized redirect URIs: http://localhost:5173
VITE_GOOGLE_CLIENT_ID=your_google_client_id_here

# Backend URL (for waitlist API)
VITE_BACKEND_URL=http://localhost:3001

# Supabase Configuration
# 1. Creez un projet sur https://supabase.com/
# 2. Settings > API > Project URL
VITE_SUPABASE_URL=https://your-project.supabase.co

# 3. Settings > API > Project API keys > anon public
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key_here

# ==============================================================================
# BACKEND (Node.js - backend/.env)
# ==============================================================================

# Twilio Configuration (pour WhatsApp)
# 1. Creez un compte sur https://www.twilio.com/
# 2. Console > Account > API keys & tokens
TWILIO_ACCOUNT_SID=your_twilio_account_sid_here
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here

# Resend Configuration (pour les emails d'invitation)
# 1. Creez un compte sur https://resend.com/
# 2. API Keys > Create API Key
RESEND_API_KEY=your_resend_api_key_here

# Supabase Service Key (pour operations backend)
# Settings > API > Project API keys > service_role secret
# ATTENTION: Ne jamais exposer cette cle cote client!
SUPABASE_SERVICE_KEY=your_supabase_service_key_here

# App URL (for email links)
APP_URL=https://alto.app

# ==============================================================================
# SUPABASE DATABASE SCHEMA
# ==============================================================================
# Executez ce SQL dans l'editeur SQL de Supabase pour creer les tables:
#
# -- Profiles (extends Supabase auth.users)
# CREATE TABLE profiles (
#   id UUID REFERENCES auth.users(id) PRIMARY KEY,
#   email TEXT UNIQUE NOT NULL,
#   display_name TEXT,
#   created_at TIMESTAMPTZ DEFAULT now()
# );
#
# -- Families
# CREATE TABLE families (
#   id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
#   name TEXT DEFAULT 'Ma Famille',
#   created_at TIMESTAMPTZ DEFAULT now(),
#   created_by UUID REFERENCES profiles(id)
# );
#
# -- Family Members (users <-> families)
# CREATE TABLE family_members (
#   id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
#   family_id UUID REFERENCES families(id) ON DELETE CASCADE,
#   user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
#   role TEXT CHECK (role IN ('owner', 'parent')) DEFAULT 'parent',
#   joined_at TIMESTAMPTZ DEFAULT now(),
#   UNIQUE(family_id, user_id)
# );
#
# -- Children (enhanced)
# CREATE TABLE children (
#   id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
#   family_id UUID REFERENCES families(id) ON DELETE CASCADE,
#   name TEXT NOT NULL,
#   birth_date DATE,
#   school_name TEXT,
#   activities TEXT[] DEFAULT '{}',
#   color TEXT DEFAULT 'bg-alto-sage/30 text-alto-navy'
# );
#
# -- Invitations
# CREATE TABLE invitations (
#   id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
#   family_id UUID REFERENCES families(id) ON DELETE CASCADE,
#   inviter_id UUID REFERENCES profiles(id),
#   email TEXT NOT NULL,
#   token TEXT UNIQUE NOT NULL,
#   status TEXT CHECK (status IN ('pending', 'accepted', 'expired')) DEFAULT 'pending',
#   expires_at TIMESTAMPTZ DEFAULT (now() + INTERVAL '7 days')
# );
#
# -- Integrations (WhatsApp phone, etc.)
# CREATE TABLE integrations (
#   id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
#   family_id UUID REFERENCES families(id) ON DELETE CASCADE,
#   user_id UUID REFERENCES profiles(id),
#   service_type TEXT CHECK (service_type IN ('gmail', 'gcal', 'whatsapp')),
#   phone_number TEXT,
#   is_active BOOLEAN DEFAULT true,
#   UNIQUE(family_id, user_id, service_type)
# );
#
# -- Row Level Security (RLS)
# ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;
# ALTER TABLE families ENABLE ROW LEVEL SECURITY;
# ALTER TABLE family_members ENABLE ROW LEVEL SECURITY;
# ALTER TABLE children ENABLE ROW LEVEL SECURITY;
# ALTER TABLE invitations ENABLE ROW LEVEL SECURITY;
# ALTER TABLE integrations ENABLE ROW LEVEL SECURITY;
#
# -- Policies (exemples basiques)
# CREATE POLICY "Users can read own profile" ON profiles FOR SELECT USING (auth.uid() = id);
# CREATE POLICY "Users can update own profile" ON profiles FOR UPDATE USING (auth.uid() = id);
#
# -- Waitlist Entries (for landing page form)
# CREATE TABLE waitlist_entries (
#   id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
#   created_at TIMESTAMPTZ DEFAULT now(),
#
#   -- Contact Info
#   email TEXT NOT NULL,
#   first_name TEXT NOT NULL,
#   city TEXT,
#
#   -- Family Context
#   has_children BOOLEAN NOT NULL,
#   family_type TEXT,
#   school_levels TEXT[],
#
#   -- Pain Points & Preferences
#   main_pain_point TEXT,
#   current_feeling TEXT,
#   ideal_usage TEXT,
#   tech_stack TEXT[],
#   desired_version TEXT[],
#   ai_level TEXT,
#
#   -- Status
#   email_sent BOOLEAN DEFAULT false,
#   converted_at TIMESTAMPTZ,
#   user_id UUID REFERENCES profiles(id)
# );
#
# CREATE INDEX idx_waitlist_email ON waitlist_entries(email);
